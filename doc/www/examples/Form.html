<!--# include file="head.html" -->

<h2>core/<a href="http://svn.shadanakar.org/listing.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2F&rev=0&sc=0">Form</a></h2>

<pre>
    <span class="orange">// user's unput emulation</span>
    <span class="blue">$_GET </span><span class="green">= array(
        </span><span class="red">'icqNumber'       </span><span class="green">=&gt; </span><span class="red">'LICQ 1.3.2'</span><span class="green">,
        </span><span class="red">'shortOne'        </span><span class="green">=&gt; </span><span class="red">'i am loooong'</span><span class="green">,
        </span><span class="red">'quiteLongText'   </span><span class="green">=&gt; </span><span class="red">"onPHP &gt;is&lt; the GPL'ed multi-purpose object-oriented \"PHP\" &lt;b&gt;framework&lt;/b&gt;."</span><span class="green">,
        </span><span class="red">'firstPassword'   </span><span class="green">=&gt; </span><span class="red">'security is'</span><span class="green">,
        </span><span class="red">'secondPassword'  </span><span class="green">=&gt; </span><span class="red">'a good thing'
    </span><span class="green">);

    </span><span class="blue">$form </span><span class="green">=
        </span><span class="blue">Form</span><span class="green">::</span><span class="blue">create</span><span class="green">()-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// only integers accepted here</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveInteger.class.php&rev=0&sc=0">integer</a></span><span class="green">(</span><span class="red">'icqNumber'</span><span class="green">)
        )-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// non-optional element</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveDate.class.php&rev=0&sc=0">date</a></span><span class="green">(</span><span class="red">'requiredElement'</span><span class="green">)-&gt;</span><span class="blue">required</span><span class="green">()
        )-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// strlen($thisOne) should be equal or lower 2</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveString.class.php&rev=0&sc=0">string</a></span><span class="green">(</span><span class="red">'shortOne'</span><span class="green">)-&gt;</span><span class="blue">setMax</span><span class="green">(</span><span class="blue">2</span><span class="green">)
        )-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// arbitrary text</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveString.class.php&rev=0&sc=0">string</a></span><span class="green">(</span><span class="red">'quiteLongText'</span><span class="green">)-&gt;
            </span><span class="blue">addImportFilter</span><span class="green">(
                </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilter.class.php&rev=0&sc=0">Filter</a></span><span class="green">::</span><span class="blue">textImport</span><span class="green">()
            )-&gt;
            </span><span class="blue">addDisplayFilter</span><span class="green">(
                </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilter.class.php&rev=0&sc=0">Filter</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilterChain.class.php&rev=0&sc=0">chain</a></span><span class="green">()-&gt;
                </span><span class="blue">add</span><span class="green">(
                    </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilter.class.php&rev=0&sc=0">Filter</a></span><span class="green">::</span><span class="blue">htmlSpecialChars</span><span class="green">()
                )-&gt;
                </span><span class="blue">add</span><span class="green">(
                	<span class="orange">... more filters here ...</span>
                )
            )
        )-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// required password</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveString.class.php&rev=0&sc=0">string</a></span><span class="green">(</span><span class="red">'firstPassword'</span><span class="green">)-&gt;</span><span class="blue">required</span><span class="green">()-&gt;
            <span class="orange">// hash it upon importing</span>
            </span><span class="blue">addImportFilter</span><span class="green">(
                </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilter.class.php&rev=0&sc=0">Filter</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FHashFilter.class.php&rev=0&sc=0">hash</a></span><span class="green">()
            )
        )-&gt;
        </span><span class="blue">add</span><span class="green">(
            <span class="orange">// second one for verification</span>
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitive.class.php&rev=0&sc=0">Primitive</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FPrimitiveString.class.php&rev=0&sc=0">string</a></span><span class="green">(</span><span class="red">'secondPassword'</span><span class="green">)-&gt;</span><span class="blue">required</span><span class="green">()-&gt;
            <span class="orange">// hash it too</span>
            </span><span class="blue">addImportFilter</span><span class="green">(
                </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFilter.class.php&rev=0&sc=0">Filter</a></span><span class="green">::</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FHashFilter.class.php&rev=0&sc=0">hash</a></span><span class="green">()
            )
        )-&gt;
        <span class="orange">// import our emulation</span>
        </span><span class="blue">import</span><span class="green">(</span><span class="blue">$_GET</span><span class="green">)-&gt;
        <span class="orange">// add optional rules by OSQL-like expressions</span>
        </span><span class="blue">addRule</span><span class="green">(
            </span><span class="red">'equalPasswords'</span><span class="green">,
            </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FLogic%2FExpression.class.php&rev=0&sc=0">Expression</a></span><span class="green">::</span><span class="blue">eq</span><span class="green">(
                new </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFormField.class.php&rev=0&sc=0">FormField</a></span><span class="green">(</span><span class="red">'firstPassword'</span><span class="green">),
                new </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FForm%2FFormField.class.php&rev=0&sc=0">FormField</a></span><span class="green">(</span><span class="red">'secondPassword'</span><span class="green">)
            )
        )-&gt;
        <span class="orange">// check 'em</span>
        </span><span class="blue">checkRules</span><span class="green">();

    </span><span class="orange">// of course, we have errors    
    </span><span class="green">if (</span><span class="blue">$errors </span><span class="green">= </span><span class="blue">$form</span><span class="green">-&gt;</span><span class="blue">getErrors</span><span class="green">()) {

        <span class="orange">// define error labels</span>
        </span><span class="blue">$form</span><span class="green">-&gt;
            </span><span class="blue">addWrongLabel</span><span class="green">(</span><span class="red">'icqNumber'</span><span class="green">,         </span><span class="red">'non-integer given'</span><span class="green">)-&gt;
            </span><span class="blue">addWrongLabel</span><span class="green">(</span><span class="red">'shortOne'</span><span class="green">,          </span><span class="red">'way too long value given'</span><span class="green">)-&gt;
            </span><span class="blue">addWrongLabel</span><span class="green">(</span><span class="red">'equalPasswords'</span><span class="green">,    </span><span class="red">"'security is' != 'a good thing'"</span><span class="green">)-&gt;
            </span><span class="blue">addWrongLabel</span><span class="green">(</span><span class="red">'quiteLongText'</span><span class="green">,     </span><span class="red">"i'm ok!"</span><span class="green">)-&gt;
            </span><span class="blue">addMissingLabel</span><span class="green">(</span><span class="red">'requiredElement'</span><span class="green">, </span><span class="red">'i defined, therefore i am'</span><span class="green">-&gt;
            </span><span class="blue">addMissingLabel</span><span class="green">(</span><span class="red">'requiredElement'</span><span class="green">, </span><span class="red">'where is my value?'</span><span class="green">);

        <span class="orange">// and give some feedback to user</span>
        foreach (</span><span class="blue">$form</span><span class="green">-&gt;</span><span class="blue">getTexturalErrors</span><span class="green">() as </span><span class="blue">$label</span><span class="green">)
            echo </span><span class="blue">$label</span><span class="green">.</span><span class="red">"\n"</span><span class="green">;
    }</span>
</pre>
<p style="text-align: center;">==</p>
<pre>
    non-integer given
    where is my value?
    way too long value given
    'security is' != 'a good thing'
</pre>

<p>PS:</p>

<pre>
    <span class="orange">// was: onPHP &gt;is&lt; the GPL'ed multi-purpose object-oriented &quot;PHP&quot; &lt;b&gt;framework&lt;/b&gt;.</span>
    echo </span><span class="blue">$form</span><span class="green">-&gt;</span><span class="blue">getDisplayValue</span><span class="green">(</span><span class="red">'quiteLongText'</span><span class="green">);</span>
</pre>
<p style="text-align: center;">==</p>
<pre>
    onPHP &amp;gt;is&amp;lt; the GPL'ed multi-purpose object-oriented &amp;quot;PHP&amp;quot; framework.
</pre>

<hr>

<!--# include file="heel.html" -->
