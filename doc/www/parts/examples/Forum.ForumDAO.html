<pre>
    <span class="green">final class </span><span class="blue">ForumDAO </span><span class="green">extends </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fmain%2FDAOs%2FMappedStorableDAO.class.php&rev=0&sc=0">MappedStorableDAO</a>
    </span><span class="green">{
        protected </span><span class="blue">$mapping </span><span class="green">= array(
            </span><span class="red">'id'             </span><span class="green">=&gt; </span><span class="blue">null</span><span class="green">,
            </span><span class="red">'name'           </span><span class="green">=&gt; </span><span class="blue">null</span><span class="green">,
            </span><span class="red">'description'    </span><span class="green">=&gt; </span><span class="blue">null</span><span class="green">,
            </span><span class="red">'created'        </span><span class="green">=&gt; </span><span class="blue">null</span><span class="green">,
            </span><span class="red">'modified'       </span><span class="green">=&gt; </span><span class="blue">null</span><span class="green">,
            </span><span class="red">'messageCount'   </span><span class="green">=&gt; </span><span class="red">'message_count'
        </span><span class="green">);
        
        public function </span><span class="blue">getTable</span><span class="green">()
        {
            return </span><span class="red">'forum'</span><span class="green">;
        }
        
        public function </span><span class="blue">getSequence</span><span class="green">()
        {
            return </span><span class="red">'forum_id'</span><span class="green">;
        }
        
        public function </span><span class="blue">getObjectName</span><span class="green">()
        {
            return </span><span class="red">'Forum'</span><span class="green">;
        }
        
        </span><span class="orange">// allow remote uncaching
        </span><span class="green">public function </span><span class="blue">uncacheById</span><span class="green">(</span><span class="blue">$id</span><span class="green">)
        {
            return </span><span class="blue">parent</span><span class="green">::</span><span class="blue">uncacheById</span><span class="green">(</span><span class="blue">$id</span><span class="green">);
        }
        
        public function </span><span class="blue">makeObject</span><span class="green">(&amp;</span><span class="blue">$array</span><span class="green">, </span><span class="blue">$prefix </span><span class="green">= </span><span class="blue">null</span><span class="green">)
        {
            return
                </span><span class="blue">Forum</span><span class="green">::</span><span class="blue">create</span><span class="green">()-&gt;
                </span><span class="blue">setId</span><span class="green">(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'id'</span><span class="green">])-&gt;
                </span><span class="blue">setName</span><span class="green">(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'name'</span><span class="green">])-&gt;
                </span><span class="blue">setCreated</span><span class="green">(new </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FBase%2FTimestamp.class.php&rev=0&sc=0">Timestamp</a></span><span class="green">(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'created'</span><span class="green">]))-&gt;
                </span><span class="blue">setModified</span><span class="green">(new </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FBase%2FTimestamp.class.php&rev=0&sc=0">Timestamp</a></span><span class="green">(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'modified'</span><span class="green">]))-&gt;
                </span><span class="blue">setMessageCount</span><span class="green">(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'message_count'</span><span class="green">])-&gt;
                </span><span class="orange">// optional
                </span><span class="blue">setDescription</span><span class="green">(
                    isset(</span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'description'</span><span class="green">])
                        ? </span><span class="blue">$array</span><span class="green">[</span><span class="blue">$prefix</span><span class="green">.</span><span class="red">'description'</span><span class="green">]
                        : </span><span class="blue">null
                </span><span class="green">);
        }
        
        public function </span><span class="blue">setQueryFields</span><span class="green">(</span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FOSQL%2FInsertOrUpdateQuery.class.php&rev=0&sc=0">InsertOrUpdateQuery</a> $query</span><span class="green">, </span><span class="blue">Forum $forum</span><span class="green">)
        {
            </span><span class="blue">$now </span><span class="green">= new </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FBase%2FTimestamp.class.php&rev=0&sc=0">Timestamp</a></span><span class="green">(</span><span class="blue">time</span><span class="green">());
            
            if (</span><span class="blue">$query </span><span class="green">instanceof </span><span class="blue"><a href="http://svn.shadanakar.org/filedetails.php?repname=onPHP&path=%2Ftrunk%2Fcore%2FOSQL%2FInsertQuery.class.php&rev=0&sc=0">InsertQuery</a></span><span class="green">) {
                </span><span class="blue">$query</span><span class="green">-&gt;</span><span class="blue">set</span><span class="green">(
                    </span><span class="red">'created'</span><span class="green">,
                    </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">setCreated</span><span class="green">(</span><span class="blue">$now</span><span class="green">)-&gt;
                        </span><span class="blue">getCreated</span><span class="green">()-&gt;</span><span class="blue">toString</span><span class="green">()
                );
                
                </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">setMessageCount</span><span class="green">(</span><span class="blue">0</span><span class="green">);
            }
            
            return
                </span><span class="blue">$query</span><span class="green">-&gt;
                    </span><span class="blue">set</span><span class="green">(</span><span class="red">'id'</span><span class="green">, </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">getId</span><span class="green">())-&gt;
                    </span><span class="blue">set</span><span class="green">(</span><span class="red">'name'</span><span class="green">, </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">getName</span><span class="green">())-&gt;
                    </span><span class="blue">set</span><span class="green">(</span><span class="red">'description'</span><span class="green">, </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">getDescription</span><span class="green">())-&gt;
                    </span><span class="blue">set</span><span class="green">(</span><span class="red">'message_count'</span><span class="green">, </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">getMessageCount</span><span class="green">())-&gt;
                    </span><span class="blue">set</span><span class="green">(
                        </span><span class="red">'modified'</span><span class="green">,
                        </span><span class="blue">$forum</span><span class="green">-&gt;</span><span class="blue">setModified</span><span class="green">(</span><span class="blue">$now</span><span class="green">)-&gt;
                            </span><span class="blue">getModified</span><span class="green">()-&gt;</span><span class="blue">toString</span><span class="green">()
                    );
        }
    }</span>
</pre>